<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
    <link rel="stylesheet" type="text/css" href="Dashboard.css">
</head>
<body>
    <!-- Tombol hamburger untuk membuka/menutup sidebar -->
    <div class="hamburger" onclick="toggleSidebar()">&#9776;</div>

    <!-- Sidebar -->
    <div class="side-bar" id="sidebar">
        <!-- Konten sidebar di sini -->
    </div>

    <!-- Konten utama -->
    <div class="content">
        <div class="header">
            <i class="fa fa-bars" onclick="toggleSidebar()"></i>
            <h1>Selamat Datang di Keuangan Ku</h1>
        </div>

        <!-- Total Box untuk Income -->
        <div class="total-box income-box">
            <h2>Total Data Income</h2>
            <div class="data-box">
                <span id="incomeTotal">Rp 0</span>
                <select id="incomeDateOption" onchange="updateIncomeData()">
                    <option value="week">Minggu</option>
                    <option value="month">Bulan</option>
                    <option value="year">Tahun</option>
                </select>
            </div>
        </div>

        <!-- Total Box untuk Expenses -->
        <div class="total-box expenses-box">
            <h2>Total Data Expenses</h2>
            <div class="data-box">
                <span id="expensesTotal">Rp 0</span>
                <select id="expensesDateOption" onchange="updateExpensesData()">
                    <option value="week">Minggu</option>
                    <option value="month">Bulan</option>
                    <option value="year">Tahun</option>
                </select>
            </div>
        </div>

        <!-- Total Box untuk Tabungan -->
        <div class="total-box savings-box">
            <h2>Total Tabungan</h2>
            <div class="data-box">
                <span id="savingsTotal">Rp 0</span>
                <select id="savingsDateOption" onchange="updateSavingsData()">
                    <option value="week">Minggu</option>
                    <option value="month">Bulan</option>
                    <option value="year">Tahun</option>
                </select>
            </div>
        </div>

        <!-- Container untuk grafik dan opsi -->
        <div class="chart-container">
            <!-- Opsi untuk memilih periode di grafik Pie -->
            <div class="chart">
                <h2>Grafik Pendapatan dan Pengeluaran</h2>
                <select id="pieChartDateOption" onchange="updatePieChart()">
                    <option value="week">Minggu</option>
                    <option value="month">Bulan</option>
                    <option value="year">Tahun</option>
                </select>
                <canvas id="myPieChart" width="300" height="300"></canvas>
            </div>

            <!-- Opsi untuk memilih periode di grafik Batang -->
            <div class="chart">
                <h2>Grafik Kategori Pengeluaran dan Pemasukan</h2>
                <select id="barChartDateOption" onchange="updateBarChart()">
                    <option value="week">Minggu</option>
                    <option value="month">Bulan</option>
                    <option value="year">Tahun</option>
                </select>
                <canvas id="myBarChart" width="300" height="300"></canvas>
            </div>
        </div>
    </div>

    <script>
        function toggleSidebar() {
            var sidebar = document.getElementById("sidebar");
            sidebar.classList.toggle("active-sidebar");
        }

        // Contoh data dummy untuk Total Income
        var dummyIncomeData = {
            week: 2500000,
            month: 10000000,
            year: 120000000,
        };

        // Contoh data dummy untuk Total Expenses
        var dummyExpensesData = {
            week: 2000000,
            month: 8000000,
            year: 96000000,
        };

        // Contoh data dummy untuk Total Tabungan
        var dummySavingsData = {
            week: 500000,
            month: 2000000,
            year: 24000000,
        };

        function updateIncomeData() {
            var incomeTotalElement = document.getElementById("incomeTotal");
            var selectedPeriod = document.getElementById("incomeDateOption").value;
            incomeTotalElement.textContent = "Rp " + formatRupiah(dummyIncomeData[selectedPeriod]);
        }

        function updateExpensesData() {
            var expensesTotalElement = document.getElementById("expensesTotal");
            var selectedPeriod = document.getElementById("expensesDateOption").value;
            expensesTotalElement.textContent = "Rp " + formatRupiah(dummyExpensesData[selectedPeriod]);
        }

        function updateSavingsData() {
            var savingsTotalElement = document.getElementById("savingsTotal");
            var selectedPeriod = document.getElementById("savingsDateOption").value;
            savingsTotalElement.textContent = "Rp " + formatRupiah(dummySavingsData[selectedPeriod]);
        }

        function updatePieChart() {
            var pieCtx = document.getElementById("myPieChart").getContext("2d");
            var selectedPeriod = document.getElementById("pieChartDateOption").value;

            var pieData = {
                labels: ["Income", "Expenses", "Tabungan"],
                datasets: [{
                    data: [dummyIncomeData[selectedPeriod], dummyExpensesData[selectedPeriod], dummySavingsData[selectedPeriod]],
                    backgroundColor: ["#36A2EB", "#4CAF50", "#FFA500"]
                }]
            };

            var pieChart = new Chart(pieCtx, {
                type: "pie",
                data: pieData,
            });
        }

        function updateBarChart() {
            var barCtx = document.getElementById("myBarChart").getContext("2d");
            var selectedPeriod = document.getElementById("barChartDateOption").value;

            var barData = {
                labels: ["Gaji", "Tabungan", "Makanan", "Hiburan", "Transportasi", "Tagihan"],
                datasets: [
                    {
                        label: "Pemasukan",
                        backgroundColor: "rgba(54, 162, 235, 0.5)",
                        data: [dummyIncomeData[selectedPeriod], dummySavingsData[selectedPeriod], 0, 0, 0, 0],
                    },
                    {
                        label: "Pengeluaran",
                        backgroundColor: "rgba(76, 175, 80, 0.5)",
                        data: [0, 0, 4000000, 2000000, 1000000, 1000000],
                    },
                ],
            };

            var barChart = new Chart(barCtx, {
                type: "bar",
                data: barData,
                options: {
                    scales: {
                        xAxes: [{
                            stacked: true,
                        }],
                        yAxes: [{
                            stacked: true,
                        }],
                    },
                },
            });
        }

        function formatRupiah(angka) {
            var reverse = angka.toString().split('').reverse().join('');
            var ribuan = reverse.match(/\d{1,3}/g);
            ribuan = ribuan.join('.').split('').reverse().join('');
            return ribuan;
        }
    </script>
</body>
</html>
