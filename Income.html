<!DOCTYPE html>
<html>
<head>
    <title>Income Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f3f3f3;
            margin: 0;
            padding: 0;
        }

        h1 {
            text-align: center;
            background-color: black; /* Ubah warna latar belakang */
            color: #fff;
            padding: 20px;
            margin: 0;
        }

        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px auto;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            background-color: #fff;
        }

        table, th, td {
            border: 1px solid #ccc;
        }

        th, td {
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #12214e; /* Ubah warna latar belakang */
            color: #fff;
        }

        select, input[type="text"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .action-btn {
            text-align: center;
            margin: 20px 0;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
        }

        .modal-content {
            background-color: #fff;
            padding: 20px;
            width: 60%;
            margin: 10% auto;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        .modal-content h2 {
            text-align: center;
            margin-bottom: 20px;
        }

        .modal-content input, .modal-content select {
            width: 95%;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .modal-content button {
            background-color: black; /* Ubah warna latar belakang */
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        .modal-content button:first-child {
            background-color: #333; /* Ubah warna latar belakang */
            margin-right: 10px;
        }

        .action-btn button {
            background-color: black; /* Ubah warna latar belakang */
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        .action-btn button:hover {
            background-color: #333; /* Ubah warna latar belakang saat hover */
        }
    </style>
</head>
<body>
    <h1>Income</h1>
    <table>
        <thead>
            <tr>
                <th>Tanggal</th>
                <th>Pilih Rekening</th>
                <th>Jumlah</th>
                <th>Kategori</th>
                <th>Keterangan</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            <!-- Tabel isi data akan muncul di sini -->
        </tbody>
    </table>
    <div class="action-btn">
        <button onclick="openModal()">Tambah Data</button>

        <button onclick="goToDashboard()">Kembali ke Dashboard</button>
    </div>

    <div id="dataModal" class="modal">
        <div class="modal-content">
            <h2>Tambah Data</h2>
            <input type="date" id="addDate" placeholder="Tanggal">
            <select id="addAccount">
                <option value="cash">Uang Tunai</option>
                <option value="ewallet">Dompet Digital</option>
                <option value="mbanking">M-Banking</option>
            </select>
            <input type="text" id="addAmount" placeholder="Jumlah">
            <select id="addCategory">
                <option value="salary">Gaji</option>
                <option value="savings">Tabungan</option>
                <option value="refund">Pengembalian Dana</option>
                <option value="investment">Investasi</option>
                <option value="freelance">Freelance</option>
            </select>
            <input type="text" id="addDescription" placeholder="Keterangan">
            <button onclick="addRow()">Tambah</button>
            <button onclick="closeModal()">Batal</button>
        </div>
    </div>

    <!-- Pop-up untuk Edit Data -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <h2>Edit Data</h2>
            <input type="date" id="editDate" placeholder="Tanggal">
            <select id="editAccount">
                <option value="cash">Uang Tunai</option>
                <option value="ewallet">Dompet Digital</option>
                <option value="mbanking">M-Banking</option>
            </select>
            <input type="text" id="editAmount" placeholder="Jumlah">
            <select id="editCategory">
                <option value="salary">Gaji</option>
                <option value="savings">Tabungan</option>
                <option value="refund">Pengembalian Dana</option>
                <option value="investment">Investasi</option>
                <option value="freelance">Freelance</option>
            </select>
            <input type="text" id="editDescription" placeholder="Keterangan">
            <button id="saveEditButton">Simpan</button>
            <button onclick="closeEditModal()">Batal</button>
        </div>
    </div>

    <script>
        var data = [];

        function openModal() {
            var modal = document.getElementById('dataModal');
            modal.style.display = 'block';
        }

        function closeModal() {
            var modal = document.getElementById('dataModal');
            modal.style.display = 'none';
        }

        function addRow() {
            var date = document.getElementById('addDate').value;
            var account = document.getElementById('addAccount').value;
            var amount = document.getElementById('addAmount').value;
            var category = document.getElementById('addCategory').value;
            var description = document.getElementById('addDescription').value;

            data.push({ date, account, amount, category, description });

            updateTable();

            closeModal();
        }

        function updateTable() {
            var table = document.querySelector('table');
            var tbody = table.querySelector('tbody');
            tbody.innerHTML = '';

            for (var i = 0; i < data.length; i++) {
                var newRow = tbody.insertRow(-1);

                var dateCell = newRow.insertCell(0);
                var accountCell = newRow.insertCell(1);
                var amountCell = newRow.insertCell(2);
                var categoryCell = newRow.insertCell(3);
                var descriptionCell = newRow.insertCell(4);
                var actionCell = newRow.insertCell(5);

                dateCell.innerHTML = data[i].date;
                accountCell.innerHTML = data[i].account;
                // Tampilkan jumlah dengan format mata uang Rupiah
                amountCell.innerHTML = formatAsRupiah(data[i].amount);
                categoryCell.innerHTML = data[i].category;
                descriptionCell.innerHTML = data[i].description;

                var editButton = document.createElement('button');
                editButton.textContent = 'Edit';
                editButton.onclick = function (index) {
                    return function () {
                        editRow(index);
                    };
                }(i);
                var deleteButton = document.createElement('button');
                deleteButton.textContent = 'Delete';
                deleteButton.onclick = function (index) {
                    return function () {
                        deleteRow(index);
                    };
                }(i);

                actionCell.appendChild(editButton);
                actionCell.appendChild(deleteButton);
            }
        }

        function editRow(index) {
            var modal = document.getElementById('editModal');
            modal.style.display = 'block';

            document.getElementById('editDate').value = data[index].date;
            document.getElementById('editAccount').value = data[index].account;
            document.getElementById('editAmount').value = data[index].amount;
            document.getElementById('editCategory').value = data[index].category;
            document.getElementById('editDescription').value = data[index].description;

            var saveEditButton = document.getElementById('saveEditButton');
            saveEditButton.onclick = function () {
                data[index].date = document.getElementById('editDate').value;
                data[index].account = document.getElementById('editAccount').value;
                data[index].amount = document.getElementById('editAmount').value;
                data[index].category = document.getElementById('editCategory').value;
                data[index].description = document.getElementById('editDescription').value;
                updateTable();
                closeEditModal();
            };
        }

        function closeEditModal() {
            var modal = document.getElementById('editModal');
            modal.style.display = 'none';
        }

        function deleteRow(index) {
            data.splice(index, 1);
            updateTable();
        }

        function formatAsRupiah(amount) {
            // Format angka menjadi mata uang Rupiah dengan separator ribuan
            return 'Rp ' + new Intl.NumberFormat('id-ID').format(amount);
        }

        function goToDashboard() {
            window.location.href = 'dashboard.html';
        }

        // Inisialisasi awal dengan data contoh
        data.push({ date: '2023-10-20', account: 'cash', amount: 100000, category: 'salary', description: 'Gaji bulan ini' });
        updateTable();
    </script>
</body>
</html>
